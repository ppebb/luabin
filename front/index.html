<!DOCTYPE html>

<head>
    <title>ppeb's luabin</title>
    <meta charset="utf-8" />
    <script type="module" src="/src/main.ts"></script>
    <link rel="stylesheet" type="text/css" href="/src/application.css" />

    <meta name="robots" content="noindex,nofollow" />

    <script type="text/javascript">
        const keyPattern = /^\/([^\.:]+)(?:[:\.]|$)/;
        const extPattern = /(\.[^\:]+)(?::|$)/;
        const langPattern = /:([^\.]+)(?:\.|$)/;

        function handlePop(event) {
            var path = event.target.location.pathname;
            if (path === '/')
                window.lbNewDocument();
            else {
                window.lbLoadDocument(
                    (path.match(keyPattern) || [])[1],
                    (path.match(extPattern) || [])[1],
                    (path.match(langPattern) || [])[1]
                );
            }
        };

        setTimeout(function () {
            window.onpopstate = function (event) {
                try {
                    handlePop(event);
                }
                catch (_) { }
            };
        }, 1000);

        document.addEventListener("DOMContentLoaded", (_) => {
            if (!window.lbLoadStoredTheme())
                window.lbApplyTheme(0);
            handlePop({target: window});
        });
    </script>
</head>

<body>
    <ul id="messages"></ul>

    <div id="container">
        <div id="pointer" style="display:none"></div>
        <div id="logo_container">
            <a class="logo" href="/about.md"></a>
        </div>
        <div id="buttons_container">
            <button class="save function button-picture">Save</button>
            <button class="new function button-picture">New</button>
            <button class="duplicate function button-picture">Duplicate & Edit</button>
            <button class="raw function button-picture">Just Text</button>
            <button class="theme function button-picture">Change Theme</button>
        </div>
        <div id="shortcut_container" style="display:none;">
            <div class="label"></div>
            <div class="shortcut"></div>
        </div>
    </div>

    <div id="linenos"></div>
    <pre id="box" style="display:none;" tabindex="0"><code></code></pre>
    <textarea spellcheck="false" style="display:none;"></textarea>
</body>
